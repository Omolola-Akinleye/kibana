/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License
 * 2.0; you may not use this file except in compliance with the Elastic License
 * 2.0.
 */

import React from 'react';
import {
  EuiTitle,
  EuiButtonEmpty,
  EuiPanel,
  EuiBasicTable,
  EuiSpacer,
  EuiToolTip,
  EuiBasicTableColumn,
} from '@elastic/eui';
import { VulnerableResourceStat } from '../../../common/types';
import {
  DASHBOARD_TABLE_TYPES,
  vulnerabilityDashboardTableContent,
} from './dashboard_table_content';
export const VulnerabilityDashboardTableTile = ({
  items,
  columns,
  tableType,
  onViewVulnerabilitiesClick,
}: {
  items: VulnerableResourceStat[];
  tableType: DASHBOARD_TABLE_TYPES;
  columns: Array<EuiBasicTableColumn<VulnerableResourceStat>>;
  onViewVulnerabilitiesClick: () => void;
}) => {
  const { title, tooltipText, buttonText } = vulnerabilityDashboardTableContent[tableType];

  return (
    <EuiPanel hasBorder paddingSize="m">
      <EuiTitle size="s">
        <h2>{title}</h2>
      </EuiTitle>
      <EuiSpacer size="m" />
      <EuiBasicTable className="vulnerabilityTable" items={items} columns={columns} />
      <EuiSpacer size="s" />
      <EuiToolTip position="top" content={tooltipText}>
        <EuiButtonEmpty iconType="search" onClick={onViewVulnerabilitiesClick} size="s">
          {buttonText}
        </EuiButtonEmpty>
      </EuiToolTip>
    </EuiPanel>
  );
};
